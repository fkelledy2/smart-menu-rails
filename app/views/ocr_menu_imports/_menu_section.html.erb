<div class="pt-8 first:pt-0" data-controller="menu-section" data-menu-section-section-id="<%= section.id %>">
  <div class="flex items-center justify-between">
    <div class="flex-1">
      <h3 class="text-lg font-medium leading-6 text-gray-900"><%= section.name %></h3>
      <% if section.description.present? %>
        <p class="mt-1 text-sm text-gray-500"><%= section.description %></p>
      <% end %>
    </div>
    <div class="ml-4 flex-shrink-0">
      <button type="button" 
              data-action="menu-section#toggleItems"
              class="text-sm font-medium text-blue-600 hover:text-blue-500 focus:outline-none">
        <span data-menu-section-target="toggleText"><%= t('.hide') %></span> <%= t('.items') %>
      </button>
    </div>
  </div>
  
  <div class="mt-4" data-menu-section-target="itemsContainer">
    <div class="bg-white shadow overflow-hidden sm:rounded-md">
      <ul class="divide-y divide-gray-200">
        <% section.ocr_menu_items.ordered.each do |item| %>
          <li class="px-4 py-4 sm:px-6">
            <div class="flex items-center justify-between">
              <div class="flex-1 min-w-0">
                <div class="flex items-center">
                  <p class="text-sm font-medium text-blue-600 truncate"><%= item.name %></p>
                  <% if item.price.present? %>
                    <span class="ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                      <%= number_to_currency(item.price) %>
                    </span>
                  <% end %>
                </div>
                <% if item.description.present? %>
                  <p class="mt-1 text-sm text-gray-500"><%= item.description %></p>
                <% end %>
                
                <% if item.allergens.present? || item.dietary_restrictions.present? %>
                  <div class="mt-2 flex flex-wrap gap-1">
                    <% if item.allergens.present? %>
                      <% item.allergens.each do |allergen| %>
                        <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800">
                          <%= allergen %>
                        </span>
                      <% end %>
                    <% end %>
                    
                    <% if item.dietary_restrictions.present? %>
                      <% item.dietary_restrictions.each do |restriction| %>
                        <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800">
                          <%= restriction.humanize %>
                        </span>
                      <% end %>
                    <% end %>
                  </div>
                <% end %>
              </div>
              <div class="ml-4 flex-shrink-0">
                <button type="button" 
                        class="text-sm font-medium text-gray-500 hover:text-gray-700 focus:outline-none"
                        data-action="click->menu-import#editItem"
                        data-item-id="<%= item.id %>"
                        data-item-name="<%= item.name %>"
                        data-item-description="<%= item.description %>"
                        data-item-price="<%= item.price %>"
                        data-item-allergens="<%= item.allergens.to_json %>"
                        data-item-dietary-restrictions="<%= item.dietary_restrictions.to_json %>">
                  <%= t('.edit') %>
                </button>
              </div>
            </div>
          </li>
        <% end %>
      </ul>
    </div>
  </div>
</div>
