<%# 
  Allergens Management - 2025 Design System
  Modern card-based layout with consistent styling
%>

<% restaurant = @futureParentRestaurant || current_user.restaurants.first %>

<!-- Page Header -->
<div class="container-fluid px-0 pb-4">
  <div class="d-flex justify-content-between align-items-start flex-wrap gap-3">
    <div>
      <h1 class="text-2xl font-semibold text-gray-900 mb-1">
        <i class="bi bi-egg-fried"></i>
        <%= t('.allergyns', default: 'Allergens') %>
      </h1>
      <p class="text-sm text-gray-500">
        <%= t('.description', default: 'Manage allergen information for menu items') %>
      </p>
    </div>
    
    <div class="d-flex gap-2">
      <% if @futureParentRestaurant %>
        <%= link_to edit_restaurant_path(@futureParentRestaurant, section: 'catalog'), 
            class: 'btn-2025 btn-2025-ghost btn-2025-md' do %>
          <i class="bi bi-arrow-left"></i> <%= t('.back', default: 'Back') %>
        <% end %>
      <% end %>
      
      <%= link_to new_restaurant_allergyn_path(restaurant), 
          class: 'btn-2025 btn-2025-primary btn-2025-md' do %>
        <i class="bi bi-plus-circle"></i> <%= t('.new_allergyn', default: 'New Allergen') %>
      <% end %>
    </div>
  </div>
</div>

<!-- Allergens Table Card -->
<div class="content-card-2025">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="content-card-title mb-0">
      <i class="bi bi-list-ul"></i>
      <%= t('.all_allergyns', default: 'All Allergens') %>
    </h2>
    
    <div class="btn-group" role="group">
      <button id="allergyn-actions" type="button" 
              class="btn-2025 btn-2025-ghost btn-2025-sm dropdown-toggle" 
              disabled 
              data-bs-toggle="dropdown" 
              aria-expanded="false">
        <%= t('common.actions', default: 'Actions') %>
      </button>
      <ul class="dropdown-menu" aria-labelledby="allergyn-actions">
        <li>
          <a id="activate-allergyn" class="dropdown-item" href="#">
            <i class="bi bi-check-circle"></i> <%= t('common.activate', default: 'Activate') %>
          </a>
        </li>
        <li>
          <a id="deactivate-allergyn" class="dropdown-item" href="#">
            <i class="bi bi-x-circle"></i> <%= t('common.deactivate', default: 'Deactivate') %>
          </a>
        </li>
      </ul>
    </div>
  </div>
  
  <div id="allergyn-table" data-bs-restaurant_id="<%= restaurant.id %>">
    <!-- Tabulator table will be loaded here via JavaScript -->
  </div>
</div>

<style>
  .text-2xl {
    font-size: 1.5rem;
    line-height: 2rem;
  }
  
  .text-gray-900 {
    color: var(--color-gray-900);
  }
  
  .text-gray-500 {
    color: var(--color-gray-500);
  }
  
  .text-sm {
    font-size: 0.875rem;
  }
</style>
