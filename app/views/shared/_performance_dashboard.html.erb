<%
  # Set defaults
  title ||= "Performance Dashboard"
  subtitle ||= ""
  icon ||= "fas fa-chart-line"
  show_period_selector ||= true
  show_kpis ||= true
  show_charts ||= true
  show_details_table ||= true
%>

<div class="container-fluid">
  <!-- Header Section -->
  <div class="row mb-4">
    <div class="col-12">
      <div class="d-flex justify-content-between align-items-center">
        <div>
          <h1 class="h3 mb-0">
            <i class="<%= icon %> text-primary me-2"></i>
            <%= title %>
          </h1>
          <% if subtitle.present? %>
            <p class="text-muted mb-0">
              <%= subtitle %> â€¢ 
              <%= performance_data[:period][:start_date] %> to <%= performance_data[:period][:end_date] %>
              (<%= performance_data[:period][:days] %> days)
            </p>
          <% end %>
        </div>
        
        <% if show_period_selector && defined?(base_path) %>
          <div class="btn-group" role="group">
            <%= link_to "7 Days", "#{base_path}?days=7", 
                        class: "btn #{'btn-primary' if params[:days] == '7'} #{'btn-outline-primary' if params[:days] != '7'}" %>
            <%= link_to "30 Days", "#{base_path}?days=30", 
                        class: "btn #{'btn-primary' if params[:days].blank? || params[:days] == '30'} #{'btn-outline-primary' if params[:days] != '30' && params[:days].present?}" %>
            <%= link_to "90 Days", "#{base_path}?days=90", 
                        class: "btn #{'btn-primary' if params[:days] == '90'} #{'btn-outline-primary' if params[:days] != '90'}" %>
          </div>
        <% end %>
      </div>
    </div>
  </div>

  <% if show_kpis %>
    <!-- Key Performance Indicators -->
    <div class="row mb-4">
      <%= render 'shared/performance_kpis', performance_data: performance_data %>
    </div>
  <% end %>

  <% if show_charts %>
    <!-- Performance Charts -->
    <div class="row mb-4">
      <%= render 'shared/performance_charts', performance_data: performance_data %>
    </div>
  <% end %>

  <% if show_details_table %>
    <!-- Performance Details Table -->
    <div class="row">
      <div class="col-12">
        <%= render 'shared/performance_details_table', performance_data: performance_data %>
      </div>
    </div>
  <% end %>
</div>

<!-- Chart.js Integration Script -->
<%= render 'shared/performance_charts_script', performance_data: performance_data %>
