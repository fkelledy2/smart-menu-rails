// ============================================================================
// SKELETON FRAME â€” Phase 1 Foundation
// Loading placeholder for Turbo Frames and async content
// ============================================================================

.skeleton-frame {
  padding: var(--space-4, 1rem);
}

.skeleton-shimmer {
  background: linear-gradient(
    90deg,
    var(--color-gray-100, #F3F4F6) 25%,
    var(--color-gray-200, #E5E7EB) 50%,
    var(--color-gray-100, #F3F4F6) 75%
  );
  background-size: 200% 100%;
  animation: skeleton-shimmer var(--motion-duration-slow, 1.5s) ease-in-out infinite;
  border-radius: var(--radius-sm, 0.25rem);
}

.skeleton-line {
  height: 14px;
  margin-bottom: var(--space-3, 0.75rem);
  width: 100%;

  &--short {
    width: 60%;
  }
}

.skeleton-image {
  width: 100%;
  height: 200px;
  margin-bottom: var(--space-4, 1rem);
  border-radius: var(--radius-md, 0.5rem);
}

@keyframes skeleton-shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

// ============================================================================
// TURBO FRAME LOADING STATE
// Turbo adds [busy] to <turbo-frame> during navigation.
// We dim content and show a shimmer bar at the top.
// ============================================================================
turbo-frame[busy] {
  position: relative;
  pointer-events: none;

  > * {
    opacity: 0.45;
    transition: opacity var(--motion-duration-base, 200ms) ease;
  }

  // Shimmer progress bar at top of frame
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    z-index: 10;
    background: linear-gradient(
      90deg,
      transparent 0%,
      var(--color-primary, #2563EB) 50%,
      transparent 100%
    );
    background-size: 200% 100%;
    animation: skeleton-shimmer var(--motion-duration-slow, 1.5s) ease-in-out infinite;
  }
}

// Restore pointer events after load
turbo-frame:not([busy]) > * {
  opacity: 1;
  transition: opacity var(--motion-duration-fast, 100ms) ease;
}

// ============================================================================
// DARK MODE
// ============================================================================
:root[data-theme="dark"] {
  .skeleton-shimmer {
    background: linear-gradient(
      90deg,
      var(--color-gray-200, #374151) 25%,
      var(--color-gray-300, #4B5563) 50%,
      var(--color-gray-200, #374151) 75%
    );
    background-size: 200% 100%;
  }
}
