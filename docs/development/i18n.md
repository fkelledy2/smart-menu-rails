# Internationalization (i18n) Guide

This project uses Rails I18n with `i18n-tasks` to keep translation keys consistent and complete across locales.

## Where to put labels

- **Form labels (Rails helpers like `form.label :attribute`)**
  - Add labels under `activerecord.attributes.<model>.<attribute>`
  - English: `config/locales/activerecord.en.yml`
  - Italian: `config/locales/activerecord.it.yml`
  - Example:
    ```yaml
    en:
      activerecord:
        attributes:
          menuavailability:
            starthour: "Start Hour"
            endhour: "End Hour"
    it:
      activerecord:
        attributes:
          menuavailability:
            starthour: "Ora di inizio"
            endhour: "Ora di fine"
    ```

- **View-specific strings (buttons, hints, etc.)**
  - Prefer the view scope (e.g., `menus.form.*` for `app/views/menus/_form.html.erb`).
  - Keep keys under the relevant file namespace, e.g., `config/locales/menus.en.yml`.

- **Boolean labels used in selects**
  - If using keys like `on`/`off`, quote them in YAML to avoid boolean coercion:
    ```yaml
    en:
      menus:
        form:
          "on": "on"
          "off": "off"
    ```

## Adding a new form field

1. Add the field in the form partial using Rails helpers, e.g., `form.label :newfield`.
2. Add translation labels under `activerecord.attributes.<model>.<newfield>` in both EN and IT.
3. Run i18n checks (see below).

## i18n-tasks commands

Run these from the project root:

- Show missing keys:
  ```bash
  bundle exec i18n-tasks missing
  ```
- Normalize and sort locale files (will reformat files):
  ```bash
  bundle exec i18n-tasks normalize
  ```
- Health report (duplicates, unused, etc.):
  ```bash
  bundle exec i18n-tasks health
  ```

## CI enforcement

GitHub Actions workflow `.github/workflows/i18n.yml` runs on PRs and on pushes to `main`/`master`:
- Normalizes locale files (fails if changes are needed)
- Fails build on missing translations

## Tips

- Keep one top-level language per file (e.g., `en:` or `it:`), avoid stray roots.
- For long text (marketing copy), prefer full sentences in dedicated files per domain (e.g., `home.en.yml`).
- Avoid reusing view-scoped keys for activerecord labels â€” keep concerns separate.
